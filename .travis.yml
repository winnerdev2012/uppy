language: node_js
node_js:
- 8.11.1
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.8
  sauce_connect:
    username:
      secure: nAMJ/d1fm9urTYsQ+1uqj6Jjf71J8rzwYBSZbTDAeUEZzAdvGc0a9H3PYWM4pnUDPo5s1c9MMetXi2XNdUbXgMKHbEnePZ2mJamqFtXMmpG8pgFmMqj+btMd7Yybt070tRsn4Vy0uBSi2H/en7F3j+grABJV+SAXqWkSB7CU1fZaN/u0DpoGBNj1ZNwkYCIhpLueYJTPRWBOodMAarXuFv5+7KFOKuZM3tF/JjsMNSSaDgTkz13BZnbX6vNPxGJJNJcyJGSaXrVW8hh1Zmvnk/XdiLy+vt7Wz1wz3A9ebiFDuydo5AAkxrLFsCJ5nGEqLg3bkr6NaTRpbM84ZT3i1FQMTdKP6OHHqwAeBscB6BkyhZhzvsFtl2YRBNK9mA3OtOYvBmTkFkNqvrPQlfu7cFtyG5+AUfSCiTTgS/vWIwoqSVAXaOEqN8Fp54ecUdkzCTttl3gXteZzNLRYvyQcFpoJb6E+dS8qAW0OFOteiwKVuPCh3nGUzBP13bRo1i9UAX7ZCTlpjinkxE8ryzbToo6ZcVQMBAkKhaw/x8GzOtfm5rgYMeQzGEoBJNfr7qqfs7JMxAIEMYjrTL9PXVOp/R8F3FdsqbV70jSyfsxMSMkwSWFRmVslG8+Djy8P3LnckGy1FEbMHnH8GZHZg+hbBzN8Be1/1fV0oRRAr939WRc=
    access_key:
      secure: OY3oWwiJghfty9wSPVvlhirvFGxPHDdIRuVkzAv6j7C/hj2BWYAP/UHrwdQ9XiYisHi/B5mGeyRVlrAf0MNGrG84rTDUbTWZbmktfuxl7A+Y6c0czk+s4SdhOiANG5b3tFl5wKq8h7uhrWH5/jWoKQ2Fz1VDCqxTvvZQbo41jSBhi7TBia626hxEePzdaiuw6HhGFZtfaoVs/FX30ylz8WDNrBjwCynjxsT52BaQrVvgEhuyzlOpI69YkZBPOq4fc3KiZ2YR43gLTx8K+sYCE9yJxdg1xT/UAawEhmedU83nyBZVo4rr7+03AixIxtI28MUCfBMlcsGwBxcKEKY/IWcp9UkPCq6+zALQoncV478tP21eYvlmxSFhYCrv+WEQlN+BcNjr4OJlmmFDbCVaF7r9qLeQPImU0+9iJU3OjrW7lpfLxORpGDEr2Nx6awKkIJCxNyK9weefeNo6Fz3V1kkyZ/7yWFeniJnRUCbahrB2XgzxIE+W307s1Qs4fm6JK7hVLTtG4fBzjChmAyGIzu744ws9WqmjvkC9D7OfnuXqanv/VcBFqPiudInerv7NL8FketUC+fxe/7XJfcxdaDGBjk8Kq7zXDohGRGymUXEoMDNJsKkMMlaKzdf7tgqdhsRJoH9NCVqrDXuG5al0UtrDP5RS7qfoxUunJmNFhlg=
cache:
  apt: true
  directories:
  - node_modules
  - website/node_modules
script:
- npm run web:install
- npm run build
- npm run test
- if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then npm run test:acceptance; fi
- npm run uploadcdn
env:
  global:
  - CXX=g++-4.8
  - secure: Z+Twmk8/yo4FbeHqk3TcLVK4fR+KUoevrUxkRM6SLckVeCwlFnoD1kQ4JTVHuS2LbW9r2T4VJ/SC6yDtdjqMRvD/ZtPw//vMw9mKyBEMZN4uxOhmHp4hltkBErqeHbZpgd4eSwSVrqDwliK27Q42wIs+Rjilc3UXqddWEmmw/VuxGR3SRpACILqe2Fqm/g73iX/7PNNASuXwmWi6Vf5ZeBQTGiCfPETblBa4WSCrPpsBv5flUEGNM9uFoXXqjAC2TyZrS4yiFGxJNf5/UPp9xipr+RhoEp8NX2GP0W2jDDfUTHFGfcUyF2lluVJKpkHjYQYrYBknjTFcQHL+aE7GWU7f6kh4g3i6e9qktVFV7yNPPokxuvVG+AxExVhZHK3wBTh2ZWs5vjcd0u5w+IV9+v+d/CZWl/zGRcHDILt2eUW9KZwoGtgrcaPnlVtYPCRBXPpsoD+lE3uOuGGGS/V5lmhBnCLexj+2rzztyb8zhQgZB2rLKF1zQ5JiBE+z0ykjHtZWMECE7r4H8K4hoaeOlIG9suPSgwQgl5HFniFUBzHWXqdsOA/tAwGAtdYSlSNAPrkiMYqXjb+1Je2uhYnfV2roBolufLmgYjmDkpVtaY968Zi3qSYTDX7gkx4NEdkiZDLJK8iXXF5RlcHHaUlno+4ytvcNMpf6V9EpTVeLaIs=
  - secure: o92bhAYmfSq6G4cpWcd8pbvmcL3cQFNXvXNmrdhWsbyaDJm29MHGNfM5d0AwRhw1X/mrIB7COG8QgK9OSYvFjFsHMKUhsryl5AWJS54535RzSV/NjQAZZvFJIf4SUhu5OEPxyMFrkCaaK1yWiWRaDRTwcjmHnkCJnhrcrtiOXPnbK+oTvDFZj7/Fz8ljtdFcAt/KGnKxreF8lojCeGh/lVLmWKliA6t55buguk1fF168wzFsUawFZSsq/gCma2SuW89CdGoGJzyUtkHSrm5T4t4wA8beQElzT1cu5Yhl62XzelXSU9zwag7/N0PlTqLvji/hhPNgck2Vj37FYo99asygiGrXBkSA+wC8tnGjAvEwO9eEch7wdnFn1IFNSNI9rDrRWBWnoa0Rq2UyUtdcXuNvDIYxsZSkWf6cuNI/BaEj2eYOb9vn8GE1hHVHZ0fLDbSN/PW5htjUf/pklBSoIyQjYE7vQAEnpkiOrpacvaMEzdAQtawIIN7HBeVJeyecV0R2r8E8NzL1JcqZ8GCfEjyAeEYjlKDRGXrzu/2PfFWXarOjr+ePgKVZxd65j9Ueqv70t1kUn1Y5AfcuiqaRveVQKn3vGLzO0u6mDz8t6Ic1/8/t4gQ569AoQFm59TLlD69kZzu05r3qF9X81fPhr2UU3tX4ZpyG1K2qk+bzn0Y=
  - secure: UYwkNMvX05Wp3gafovGHi+F2ks4/Hsb1Z3tfTTSFQdocOrU64gsE4be9jhoBJm1qnkAjOegySD0/YLA+kH5EwyUVbKrCKPNRvLcUnYGV1ohR3aWZkZhKbG9vR9zl1MyHFuL/2JTg+yI5ZyXB2GkZVfZgHvWOlfsakq8JA5G4DHLoJcIA8/cKeyb4HDWm7ZsELoUW3+VKk6M7OGS5kSMeMEJHHDim3A9mT6sBraQ3ZA+Xek6vNfoDEslG2coybsLBgbTCbj/xANnPk8xWo03ZtGG8LIWkq1FcU0Eqfi0Jp9o9lYElzTW0fx6uaeLcBX/VhywszSw4EQT0dRKzUlB3H2vdRqSo71PdUwYoSV+oUSU9WlOe0Z8efRN1sXqS0BefL4vod6Rl6N4cXhQ5JNQtRoNkQ7mDzTcBudCw0jFjSyW+1ikiH19tNFd4SMBaaqLWOeia967/atwXMid7Oc1o2tFT3Lf3w9DjeTarsdW9K7zPQpN6DPUbbitEi1XqIdwXpNy5F15Jy7/qJzsaZ6xI5pRD98NePP3j2fqwLbJSyohut2mbxWPGYEfpLsYhwVPQaLm6xJZK2ThYJ3naRUzMFm4Rox+I2FhVX2j0ZsLQf9P+Xi3jahv3I3LI7iHHlLNRgyVlZ/+FcJPMPpmBqsyWnvmniZiXqk3g1499LIOjf2A=
  - secure: gAu+EDw7HOBeemDsEroMhGPkwvsnAkTlX3EbgyZUVs/QyCad9nxK5NxqSST8S7+CAqcAMtpS7HBiwjsjV2qZ3iJ12W1KuN3V7td7hDX/FC7rzSIjyNfkrgOvb/JYRG9RMtMLds2XxyojZYGjyBZyjunZwI8UquZqJwJhOQo0hdv4Fj0rCjq7jeMGrKgSiVokOqoi3KcfBugbwPLP6JMDTmcIvcD+x3HhvxMWXIfuJyaalZYu1wfD7s811iTl9IN+VT4YkXx7K0V6AmwH8zJKEG0GJdhJsjQcKOqBpk0jjfvQk/XQOFqYwimzRkYyNrzLOni7HHxyaMcv8SzwrM8beasu6o9HPsmOFtwNYiacuHi6ikan9EyGgaONk62NYtAmuV/72y2NbEbpzpSwcBvkDwyVq2iif3S5zU4qWTJh1K3YfJqOqhhNwL/j36drNb5xnRyTCl79Y+60lgv922H0FifpUZRZUc+NvRV9Q+uqJdlK2vzfr4P6BWBvOjlOfzSFqbY++UucuzfdAVblUbhTQ6bofPFw8ZLMylu7QxdCpu7htaNgxssWiNW+BaUSm6fzQD8ibP1u3n6gmSEVxZuUMBeKRE8fDR4YfSpq0BYgLrc+sUNq1iZzKnVGKL79mJkOAS1Sm9tI/vqG5f2Uf4donAWT53+d3UAH9eSKTA29meA=
  - secure: NpYqPeN/gloTHMywnfVlyLFj/IbIBRkL1nb4SdtA99NfRJo0kDB+k6wLNaLNXY2q0WhpeTQIDPJ2ptONf6u1Gu2yxFKN3myYG8XVcmYmIWbqKAaKFT9+SY0SrP22nPmXQL7oyfWxsTLUyuh8F/52FlPro/o58QZK8cJE5CCkVeGrTb5LetKqmtuvndfBRrb0cLOCkk48emUtwjbMYUMDDwCIWmtTPKMQCot8kn2XAQQZ6kDiP8tu5WhdNnS3kjfOCLW9A7EYt8ULkRXWHN1yUoVdWwLlDEMglkEthSp63bmDrx0iX00lVYFbzkohEYA4tCzXklP1TKKV6xQG6DoCsnJzyaqT6m8WNj0EWghBff7Cus0WvLKZaAOSkZfsyG/q94PdTh1PMiRbNuJQja/JnXqFrzFLF/bExA3tHZOcBajGL2fynOj+IsNuv+DdP0q+kApUwZKFG4fZ6MQkzl+R0gc4RvlVakp3sTgQwefd0VJN980+SKFzofdzEkaLCwLMXsYhBLLo6jb6/Xm0rq/uWZLM/kKdnA2qYxMUjF3KZY4HT2P4nVyFscDmuDPjJ49dtKvWK7XGCER1JtW2J+yAyZ2Slv/TzDWrM0IRZlYGbRkjq6Sly0KGABanMXC2J29Gy5Q+wNoFD5NBE+pz/Mt99ggXn7HrlCQvTpdtCoIpYpk=
  - secure: YpVwjcpc6FomKgRb0tP8MpITEOfvMP2kTAnpSfG3USMW3mZ8Zkn8CLr471DjpmVE2jHklI6AfPTpGPFb1VOsrS7Ea4jxAJOdBwH6Ab7kL52GX0GYtPsSxeTVME5IMZXsU90UCbAXKOEkZbGq5sIaIHjAePmcNSv+OHb157fqcyX0oSJWDg1eVzBikgWhpKtlcbPFp7AdoIvhDr5bPLyV1c0HmOIEirc0VcoQg3fYsKB7mY5tP7KCqCIJtZtD0+FiSamp13WImD0/7wwX0hbTG2KH3zgjyiKOLxsbwXOIpXIJ0utXY4EFZBTTSZjItbL/f5wzZ+xBhwAsy5/Vi2pCtiVI2sUZ98b3FioLdQ7+3jQviNmOam6b56KTNAy2l4Tlu5h8PGtBvsDo+ZcgJ06q65YRZQcnOIweGv0vZ31cdgcVXRb+8fWFywQeIk6DD0FluB3/zZl7pn2Olha0gv4DxiythXDAHRoTzZfFfaPL1T+kl6ViGNQvKi6ucy8/ltlO/JKAeJlWKJouWOe2TvGMNU6JKQfAiqz1y16lVa8P5VYj+cRbsfalYfhqEf96kMdelgCup7mQdTMAiOP6lhIF9ItMjVqVFQECYy6oItxAGXc8UAJJcKJSc6DwVTgOK6V7LfkoM8O6qMeFzfpPnsFEl3uwjQEmMzc7Wk2LxkrFoBI=
  - secure: gqSy8e0l5gm6xqgKtKwbE8K+bhIrL9+NwqG6nADUhEFZqtNiNzeKu2Ym++cTrRJhBaJQr9gy+GJtL2BH2rFwIhtuk+/zsdaenPC8tZ/Phof5MBVJApPJ0kgbbFpcJFx8xu6TrlOfDls0Cu8RHA6FQ/4RSoBooCZOrWHrPXpJiN04lAZUpUdJyAg/1suP2owAcvJAjKI7laWVLTkhDZNjDDJ2gSjGtF3AnWL0piRCJXAWehrgcLFC8PMC9RAG/Puxh9WH8dCH8Tp0ccfib11X2mtT1Ii6mwg8y6U6h3yoRC9dJCB+IGjDKkE8aEESzvsQBp3T6QIqxNK4gAhN90je+bT9AjoHLVcIao7aCHCAvOXlQobZCzWdbfCZJEba+Xse2Zvwyy0mjEae97eljsRwsaH7qXEMcBNipqU9S1p7DQAwLU1Wgkyn1eml65Gc12VZ+fEjzS10OfYLHnxxUnrjGGJqNOdVkj+arwGm2ZTYzrUB3csHm47mTQz2x9QqWE4ICs3D/OLK4zMNq+pSiYtYv6sbY4WDWSFXMQtkys7DgCBAiQg7Eekedp22o/mVX2b3ZQ11SUAT5MIvhGRzvsk32puaiVW2tSAXeH534diuNSUuguzoDrS1fGBsBLeQbV+f0QfhjCziF1hWzp3rwq2b3szsC3lDOxG3Zq/lCGIZ050=
  - secure: YDeqwl7CH0YoMqy+hgqcdzPUHVhiZxiHHqTt0INX6o6LdB9gh6P2II7nJYAKuXeIhboM2bVsyGoiTnx/Pxmkil8Kr7Uc5KJZ/4bHD3+MLT0gtrfh8WPyzMRePxrjn380kYFYz/N5LSWRm5A+92U7wPNRYBJIDWpVdHxE9zs7nclBJsvq/Gyidx/2A9LvEn4zmgCcKgB7GoVfXCtMUpQTtVjGCt2O+j0abeg8cyA/edxZaUvgHIZxSM7oAQjvlEloSSKPQPcrmIqru9fSN/VHyMLATUMtqp+I8jULOA+WLDgyEYUA8ofdMYlGyVlSp01fYK3bSNbcma/dln/O0wczPsIlz2ZWhwKXcGn44SQWrOOEazs/FalO1TNAql/1P2iyNd/1M77EjpLMWewpqnRCvKiCVFiJ++MfE9jEYbQtvc3jpa+seKlqPnP/4kQlINKow+J3sI7zveTf/iIcS/zN86oQw2QXlf7XoiTg5Et6zo0a+cf/uuS6e1m4cs+kvL4t+g3mMTgtou0Hifl98BmoyatP4/SszO1/lWEKi0sO06zv56A0FXtUjkZAX3MA8goOIHfpUZR1KbrbbQdI0nbAjHiIvsGg+aoAHTx9xMY3Ceb/xmK2AHZZfoH1yJFHARTbiaNcpKTPI7wp0eH4Ptbmh0u0FLQEYFtt3vQGALtueU0=
  - secure: GXEHrPdfmMrBshZqAEXzbg2vHRvammVLxo2PwAH/m4Mi30cSoRq80aYH2vrzWR07jAEM/jyS/OSY2jMBgQPGfF2c3lrdJSSkqFUnfbvHnhH+fZe9mv9T6VUyTSWPge4z8ZbjHSqZORNW31jCuZC2ftGJBJpYdfoKaladK08vcBIj+bG1bjdZwio2HjycO55saILrZQVYHu6VKe2g2oNdEC2xaP1NBuxBFpR5NZwOLQjPjR3lU8xvTy5hU+rxR0ILi7aJ+mIUzcK0q3FSoLFJTa6E6OYWw9DMamaKk6OpBqALBAWIAw37Z6qYdgolQqGR3ZSgvR3aZIDveoim6tVWJG4lLn5mD+jNuM2N3XxFOIfSafE3PDJy7HUsDFkv+nXh2TFzEsFSzNxY1I+falgkq/CEnMSeYWxdvsa+H2zuCBoi6Y33PqR9rgFjukdJ0R2Agam1Jx/wLMoOnos7gc12fm/ARlUSPMFXmuKuTLFparDPZeh/98Wz91yyI1jWww3tQOVMOTiANyxXaVhOKsmhyOqfvvaaytyWYthW1ZQCczHZYhXC5bL86hq3ZQkFFhG45Z3zxmsXMZBz8O5T1epsR8Jnsja9OmXpgLuWx4FBw8MeAtTYC1ewFFR52LMgcN2KBTs97iwT5TIPywA9NMvl9CnKK3CReEyzSaPdtECBBIY=
  - secure: h1Ye8bDFv3F4Z3wWXLHCu8fTXiHQ30pUDi5jEW+e5FoQoVAFLzZNlKTFpPKPv59DT163G6xdA5FbJ2U/8rnmKXChEP8I7p25ajK5hNYr6KKhmR0dwBzEE4Vt6pgjiWPnaeBVsI1nxb8++aWDPoAAvphfzrSvPft5HYHTjpPuHz3TDhxY2I8/bP16ohh8M1MiD+iPbk+ScGgjJhzBUcW1NgMat2j4jGYPtzyQknHM95+GSBgdpKT8GJqsgivUGX9CrnGEWHUpq6NlaGK0uba316WxVmtGGi7obNvIUrxghbN1WtrtNxkg7DnXk3HHHEupc4T339zDZ86sIdJzRqlpdp0kTsPHU/drb5jpWBtfmBjylVh8gTEwyecpUtLttf2Ex1/Am1JiwchqJfd45/fGQ411SFNlvLUH9Ew37S4Q9wG7lafpbSiG2+oFxz2OjHM6VPSTVlg5K9nA40Ipf2TE21GaPSPL2j4eGm58VFym679xeTOXo9bZ537uuiXRL4ODjg7aq/Z6VgKpbyeCiC8iucapdQcb9P6GweB7t0gB3WK6Dyh4XpwhCqOwKNPgMcyd5+6bNVAIxygmo0PLaQ8L+3huUtqqaMFm6qvy/e3djY/kDuBMVwmee3D9xoDVPcF2Mtz6pKcFjVGmYJqHM3aFk3uc420GFP9gcLStWTz84MY=
notifications:
  slack:
    secure: L3iQQE8sZ0ik1Z26gPoNMiIam9EOEwYhraHCY60Jk/wmfH6SW/727yKXpgcb/yayx37rUZplvoO7H8e05ISxTJKSepEeqbBUIBQs48S8hr+FHk0VPtpP4HGxqaITRLm+mI1coPRvfISxzrB8d240oup6muhC9Ws4/LXi6v8miyIOs2zoYmGxd56TrUeON3UYlKt6dMava0V4bugARzrafN/tfyI9ccqbHzQLBspQvBI61DzZ5I2vnWpkjfWgIHz9Fl4VzXHqMXwjuTUEu8ibA12b3dHZiJEAoqeb9Oj9QcLPbstPLhlNTZZaOrfiFtwLctI2rFh37slDpAfk5idv3ycxcoG5rbCxgyg5i6dpQqrqHxnyglgHg2/nZ+YA5okeS7nJJNtU/4S6AFRWOUUWMVVY0VBEV+8w+uurl0PDy80RUY3uyK64qAgQ8U0M81/Ys1oyWyn78TqHcbby7V2Ws5I9Yakrq8D+mdfsWYCio8F6LXHSwJ0mt2FanJtdDvpPk9sAwsXZN0n8xhELt5TiRp3bzVIQ0IPUgF54dTG9/zWRvC1P4TFaFU/2fg73ZEUC5aWJoFMnLSZjbZvp5gwpCVd0MjSBk80nF9dHYcavIgJ0wMGI3BMb8Nn6+T11Gw/ycr7OGU4NMkj7i8vSFgKF74piWZyiNW8orkMN6XZgM+o=

# Travis docs: Note that pull request builds skip deployment step altogether.
# https://docs.travis-ci.com/user/deployment/#Conditional-Releases-with-on
deploy:
  skip_cleanup: true
  provider: script
  script: bin/travis-deploy
  on:
    branch: master
